hue:
  bridge: "192.168.10.12"
  token: "${HUE_TOKEN:replace-me}"
  timeout: "30s"                # HTTP timeout for Hue API requests

database:
  path: "./hueplanner.sqlite"

log:
  level: "${LOG_LEVEL:info}"
  use_json: false               # Use JSON log format (default: false)
  colors: ${LOG_COLORS:true}    # Colorize text output (ignored when use_json is true)

reconciler:
  enabled: true                 # Enable/disable reconciler (default: true)
  periodic_interval: 0          # Periodic reconciliation interval (0 = disabled, default)
  debounce_ms: 0                # Delay before reconciliation in ms (0 = immediate)
  rate_limit_rps: 10.0          # Hue API rate limit (requests per second)

ledger:
  enabled: true                 # Enable/disable ledger (default: true)
  retention_period: "72h"       # How long to retain ledger entries (default: 30 days)
  retention_interval: "24h"     # How often to run cleanup (default: 24h)

healthcheck:
  enabled: true
  host: "0.0.0.0"
  port: 9090

eventbus:
  workers: 4                    # Number of worker goroutines for event processing
  queue_size: 100               # Event queue size (events dropped if full)

kv:
  cleanup_interval: "5m"        # Interval for cleaning expired KV entries

shutdown_timeout: "5s"          # Timeout for graceful shutdown of all services

events:
  webhook:
    enabled: true
    host: "0.0.0.0"
    port: 8081

  sse:
    enabled: true               # Enable/disable Hue SSE event stream
    min_retry_backoff: "1s"     # Minimum backoff between reconnects
    max_retry_backoff: "2m"     # Maximum backoff between reconnects
    retry_multiplier: 2.0       # Backoff multiplier
    max_reconnects: 0           # Max reconnect attempts, 0 = infinite

  scheduler:
    enabled: true               # Enable/disable scheduling
    geo:
      enabled: true             # Enable/disable geocoding for astronomical times
      use_cache: true           # Use cached location coordinates
      name: "Espoo, Finland"    # Location name for geocoding
      timezone: "Europe/Helsinki"
      http_timeout: "10s"       # Timeout for geocoding HTTP requests
      # lat: 60.2055            # Pre-configured coordinates (avoids Nominatim calls)
      # lon: 24.6559            # If not set, will geocode 'name' at startup

script: "main.lua"
